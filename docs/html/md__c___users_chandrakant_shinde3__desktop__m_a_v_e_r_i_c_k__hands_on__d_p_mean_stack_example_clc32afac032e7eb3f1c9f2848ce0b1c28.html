<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>end to end lab: Copy anything üé≠</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">end to end lab
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Copy anything üé≠ </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a href="https://www.npmjs.com/package/copy-anything"><img src="https://img.shields.io/npm/v/copy-anything.svg" alt="Total Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/copy-anything"><img src="https://img.shields.io/npm/dw/copy-anything.svg" alt="Latest Stable Version" style="pointer-events: none;" class="inline"/></a></p>
<div class="fragment"><div class="line">npm i copy-anything</div>
</div><!-- fragment --><p >An optimised way to copy'ing (cloning) an object or array. A small and simple integration.</p>
<h1><a class="anchor" id="autotoc_md3535"></a>
Motivation</h1>
<p >I created this package because I tried a lot of similar packages that do copy'ing/cloning. But all had its quirks, and <em>all of them break things they are not supposed to break</em>... üòû</p>
<p >I was looking for:</p>
<ul>
<li>a simple copy/clone function</li>
<li>has to be fast!</li>
<li>props must lose any reference to original object</li>
<li>works with arrays and objects in arrays!</li>
<li>supports symbols</li>
<li>can copy non-enumerable props as well</li>
<li>**does not break special class instances**„ÄÄ‚ÄºÔ∏è</li>
</ul>
<p >This last one is crucial! So many libraries use custom classes that create objects with special prototypes, and such objects all break when trying to copy them inproperly. So we gotta be careful!</p>
<p >copy-anything will copy objects and nested properties, but only as long as they're "plain objects". As soon as a sub-prop is not a "plain object" and has a special prototype, it will copy that instance over "as is". ‚ôªÔ∏è</p>
<h1><a class="anchor" id="autotoc_md3536"></a>
Meet the family</h1>
<ul>
<li><a href="https://github.com/mesqueeb/copy-anything">copy-anything üé≠</a></li>
<li><a href="https://github.com/mesqueeb/merge-anything">merge-anything ü•°</a></li>
<li><a href="https://github.com/mesqueeb/filter-anything">filter-anything ‚öîÔ∏è</a></li>
<li><a href="https://github.com/mesqueeb/find-and-replace-anything">find-and-replace-anything üé£</a></li>
<li><a href="https://github.com/mesqueeb/compare-anything">compare-anything üõ∞</a></li>
<li><a href="https://github.com/mesqueeb/flatten-anything">flatten-anything üèè</a></li>
<li><a href="https://github.com/mesqueeb/is-what">is-what üôâ</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md3537"></a>
Usage</h1>
<div class="fragment"><div class="line">import { copy } from &#39;copy-anything&#39;</div>
<div class="line"> </div>
<div class="line">const original = { name: &#39;Ditto&#39;, type: { water: true } }</div>
<div class="line">const copy = copy(original)</div>
<div class="line"> </div>
<div class="line">// now if we change a nested prop like the type</div>
<div class="line">copy.type.water = false</div>
<div class="line">// or add a new nested prop</div>
<div class="line">copy.type.fire = true</div>
<div class="line"> </div>
<div class="line">// then the original object will still be the same:</div>
<div class="line">(original.type.water === true) // true</div>
<div class="line">(original.type.fire === undefined) // true</div>
</div><!-- fragment --><blockquote class="doxtable">
<p >&zwj;Please note, by default copy-anything does not copy non-enumerable props. If you need to copy those, see the instructions further down below. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md3538"></a>
Works with arrays</h1>
<p >It will also clone arrays, <b>as well as objects inside arrays!</b> üòâ</p>
<div class="fragment"><div class="line">const original = [{ name: &#39;Squirtle&#39; }]</div>
<div class="line">const copy = copy(original)</div>
<div class="line"> </div>
<div class="line">// now if we change a prop in the array</div>
<div class="line">copy[0].name = &#39;Wartortle&#39;</div>
<div class="line">// or add a new item to the array</div>
<div class="line">copy.push({ name: &#39;Charmander&#39; })</div>
<div class="line"> </div>
<div class="line">// then the original array will still be the same:</div>
<div class="line">(original[0].name === &#39;Squirtle&#39;) // true</div>
<div class="line">(original[1] === undefined) // true</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3539"></a>
Non-enumerable</h1>
<p >By default, copy-anything only copies enumerable properties. If you also want to copy non-enumerable properties you can do so by passing that as an option.</p>
<div class="fragment"><div class="line">const original = { name: &#39;Bulbasaur&#39; }</div>
<div class="line">// bulbasaur&#39;s ID is non-enumerable</div>
<div class="line">Object.defineProperty(original, &#39;id&#39;, {</div>
<div class="line">  value: &#39;001&#39;,</div>
<div class="line">  writable: true,</div>
<div class="line">  enumerable: false,</div>
<div class="line">  configurable: true,</div>
<div class="line">})</div>
<div class="line">const copy1 = copy(original)</div>
<div class="line">(copy1.id === undefined) // true</div>
<div class="line"> </div>
<div class="line">const copy2 = copy(original, { nonenumerable: true })</div>
<div class="line">(copy2.id === &#39;001&#39;) // true</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3540"></a>
Limit to specific props</h1>
<p >You can limit to specific props.</p>
<div class="fragment"><div class="line">const original = { name: &#39;Flareon&#39;, type: [&#39;fire&#39;], id: &#39;136&#39; }</div>
<div class="line">const copy = copy(original, { props: [&#39;name&#39;] })</div>
<div class="line"> </div>
<div class="line">(copy) // will look like: `{ name: &#39;Flareon&#39; }`</div>
</div><!-- fragment --><blockquote class="doxtable">
<p >&zwj;Please note, if the props you have specified are non-enumerable, you will also need to pass <code>{nonenumerable: true}</code>. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md3541"></a>
Source code</h1>
<p >The source code is literally just these lines. Most of the magic comes from the isPlainObject function from the <a href="https://github.com/mesqueeb/is-what">is-what library</a>.</p>
<div class="fragment"><div class="line">import { isPlainObject } from &#39;is-what&#39;</div>
<div class="line"> </div>
<div class="line">export function copy (target) {</div>
<div class="line">  if (isArray(target)) return target.map(i =&gt; copy(i))</div>
<div class="line">  if (!isPlainObject(target)) return target</div>
<div class="line">  return Object.keys(target)</div>
<div class="line">    .reduce((carry, key) =&gt; {</div>
<div class="line">      const val = target[key]</div>
<div class="line">      carry[key] = copy(val)</div>
<div class="line">      return carry</div>
<div class="line">    }, {})</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
