<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>end to end lab: MongoDB NodeJS Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">end to end lab
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">MongoDB NodeJS Driver </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >The official <a href="https://www.mongodb.com/">MongoDB</a> driver for Node.js.</p>
<p ><b>Upgrading to version 4? Take a look at our <a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/docs/CHANGES_4.0.0.md">upgrade guide here</a>!</b></p>
<h1><a class="anchor" id="autotoc_md18102"></a>
Quick Links</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">what   </th><th class="markdownTableHeadNone">where    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">documentation   </td><td class="markdownTableBodyNone"><a href="https://docs.mongodb.com/drivers/node">docs.mongodb.com/drivers/node</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">api-doc   </td><td class="markdownTableBodyNone"><a href="https://mongodb.github.io/node-mongodb-native/">mongodb.github.io/node-mongodb-native/</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">npm package   </td><td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/mongodb">www.npmjs.com/package/mongodb</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">source   </td><td class="markdownTableBodyNone"><a href="https://github.com/mongodb/node-mongodb-native">github.com/mongodb/node-mongodb-native</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">mongodb   </td><td class="markdownTableBodyNone"><a href="https://www.mongodb.com">www.mongodb.com</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">changelog   </td><td class="markdownTableBodyNone"><a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/HISTORY.md">HISTORY.md</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">upgrade to v4   </td><td class="markdownTableBodyNone"><a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/docs/CHANGES_4.0.0.md">docs/CHANGES_4.0.0.md</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">contributing   </td><td class="markdownTableBodyNone"><a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/CONTRIBUTING.md">CONTRIBUTING.md</a>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md18103"></a>
Bugs / Feature Requests</h2>
<p >Think you’ve found a bug? Want to see a new feature in <code>node-mongodb-native</code>? Please open a case in our issue management tool, JIRA:</p>
<ul>
<li>Create an account and login <a href="https://jira.mongodb.org">jira.mongodb.org</a>.</li>
<li>Navigate to the NODE project <a href="https://jira.mongodb.org/browse/NODE">jira.mongodb.org/browse/NODE</a>.</li>
<li>Click <b>Create Issue</b> - Please provide as much information as possible about the issue type and how to reproduce it.</li>
</ul>
<p >Bug reports in JIRA for all driver projects (i.e. NODE, PYTHON, CSHARP, JAVA) and the Core Server (i.e. SERVER) project are <b>public</b>.</p>
<h2><a class="anchor" id="autotoc_md18104"></a>
Support / Feedback</h2>
<p >For issues with, questions about, or feedback for the Node.js driver, please look into our <a href="https://docs.mongodb.com/manual/support">support channels</a>. Please do not email any of the driver developers directly with issues or questions - you're more likely to get an answer on the <a href="https://community.mongodb.com/tags/c/drivers-odms-connectors/7/node-js-driver">MongoDB Community Forums</a>.</p>
<h2><a class="anchor" id="autotoc_md18105"></a>
Change Log</h2>
<p >Change history can be found in <a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/HISTORY.md"><code>HISTORY.md</code></a>.</p>
<h2><a class="anchor" id="autotoc_md18106"></a>
Compatibility</h2>
<p >For version compatibility matrices, please refer to the following links:</p>
<ul>
<li><a href="https://docs.mongodb.com/drivers/node/current/compatibility/#mongodb-compatibility">MongoDB</a></li>
<li><a href="https://docs.mongodb.com/drivers/node/current/compatibility/#language-compatibility">NodeJS</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md18107"></a>
Typescript Version</h3>
<p >We recommend using the latest version of typescript, however we do provide a <a href="https://github.com/sandersn/downlevel-dts#readme">downleveled</a> version of the type definitions that we test compiling against <code>typescript@4.1.6</code>. Since typescript <a href="https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes">does not restrict breaking changes to major versions</a> we consider this support best effort. If you run into any unexpected compiler failures please let us know and we will do our best to correct it.</p>
<h1><a class="anchor" id="autotoc_md18108"></a>
Installation</h1>
<p >The recommended way to get started using the Node.js 4.x driver is by using the <code>npm</code> (Node Package Manager) to install the dependency in your project.</p>
<p >After you've created your own project using <code>npm init</code>, you can run:</p>
<div class="fragment"><div class="line">npm install mongodb</div>
<div class="line"># or ...</div>
<div class="line">yarn add mongodb</div>
</div><!-- fragment --><p >This will download the MongoDB driver and add a dependency entry in your <code>package.json</code> file.</p>
<p >If you are a Typescript user, you will need the Node.js type definitions to use the driver's definitions:</p>
<div class="fragment"><div class="line">npm install -D @types/node</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md18109"></a>
Troubleshooting</h1>
<p >The MongoDB driver depends on several other packages. These are:</p>
<ul>
<li><a href="https://github.com/mongodb/js-bson">bson</a></li>
<li><a href="https://github.com/mongodb-js/bson-ext">bson-ext</a></li>
<li><a href="https://github.com/mongodb-js/kerberos">kerberos</a></li>
<li><a href="https://github.com/mongodb/libmongocrypt#readme">mongodb-client-encryption</a></li>
</ul>
<p >Some of these packages include native C++ extensions. Consult the <a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/docs/native-extensions.md">trouble shooting guide here</a> if you run into issues.</p>
<h1><a class="anchor" id="autotoc_md18110"></a>
Quick Start</h1>
<p >This guide will show you how to set up a simple application using Node.js and MongoDB. Its scope is only how to set up the driver and perform the simple CRUD operations. For more in-depth coverage, see the <a href="https://docs.mongodb.com/drivers/node/">official documentation</a>.</p>
<h2><a class="anchor" id="autotoc_md18111"></a>
Create the &lt;tt&gt;package.json&lt;/tt&gt; file</h2>
<p >First, create a directory where your application will live.</p>
<div class="fragment"><div class="line">mkdir myProject</div>
<div class="line">cd myProject</div>
</div><!-- fragment --><p >Enter the following command and answer the questions to create the initial structure for your new project:</p>
<div class="fragment"><div class="line">npm init -y</div>
</div><!-- fragment --><p >Next, install the driver as a dependency.</p>
<div class="fragment"><div class="line">npm install mongodb</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md18112"></a>
Start a MongoDB Server</h2>
<p >For complete MongoDB installation instructions, see <a href="https://docs.mongodb.org/manual/installation/">the manual</a>.</p>
<ol type="1">
<li>Download the right MongoDB version from <a href="https://www.mongodb.org/downloads">MongoDB</a></li>
<li>Create a database directory (in this case under **/data**).</li>
<li>Install and start a <code>mongod</code> process.</li>
</ol>
<div class="fragment"><div class="line">mongod --dbpath=/data</div>
</div><!-- fragment --><p >You should see the <b>mongod</b> process start up and print some status information.</p>
<h2><a class="anchor" id="autotoc_md18113"></a>
Connect to MongoDB</h2>
<p >Create a new <b>app.js</b> file and add the following code to try out some basic CRUD operations using the MongoDB driver.</p>
<p >Add code to connect to the server and the database <b>myProject</b>:</p>
<blockquote class="doxtable">
<p >&zwj;<b>NOTE:</b> All the examples below use async/await syntax.</p>
<p >However, all async API calls support an optional callback as the final argument, if a callback is provided a Promise will not be returned. </p>
</blockquote>
<div class="fragment"><div class="line">const { MongoClient } = require(&#39;mongodb&#39;);</div>
<div class="line">// or as an es module:</div>
<div class="line">// import { MongoClient } from &#39;mongodb&#39;</div>
<div class="line"> </div>
<div class="line">// Connection URL</div>
<div class="line">const url = &#39;mongodb://localhost:27017&#39;;</div>
<div class="line">const client = new MongoClient(url);</div>
<div class="line"> </div>
<div class="line">// Database Name</div>
<div class="line">const dbName = &#39;myProject&#39;;</div>
<div class="line"> </div>
<div class="line">async function main() {</div>
<div class="line">  // Use connect method to connect to the server</div>
<div class="line">  await client.connect();</div>
<div class="line">  console.log(&#39;Connected successfully to server&#39;);</div>
<div class="line">  const db = client.db(dbName);</div>
<div class="line">  const collection = db.collection(&#39;documents&#39;);</div>
<div class="line"> </div>
<div class="line">  // the following code examples can be pasted here...</div>
<div class="line"> </div>
<div class="line">  return &#39;done.&#39;;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">main()</div>
<div class="line">  .then(console.log)</div>
<div class="line">  .catch(console.error)</div>
<div class="line">  .finally(() =&gt; client.close());</div>
</div><!-- fragment --><p >Run your app from the command line with:</p>
<div class="fragment"><div class="line">node app.js</div>
</div><!-- fragment --><p >The application should print <b>Connected successfully to server</b> to the console.</p>
<h2><a class="anchor" id="autotoc_md18114"></a>
Insert a Document</h2>
<p >Add to <b>app.js</b> the following function which uses the <b>insertMany</b> method to add three documents to the <b>documents</b> collection.</p>
<div class="fragment"><div class="line">const insertResult = await collection.insertMany([{ a: 1 }, { a: 2 }, { a: 3 }]);</div>
<div class="line">console.log(&#39;Inserted documents =&gt;&#39;, insertResult);</div>
</div><!-- fragment --><p >The <b>insertMany</b> command returns an object with information about the insert operations.</p>
<h2><a class="anchor" id="autotoc_md18115"></a>
Find All Documents</h2>
<p >Add a query that returns all the documents.</p>
<div class="fragment"><div class="line">const findResult = await collection.find({}).toArray();</div>
<div class="line">console.log(&#39;Found documents =&gt;&#39;, findResult);</div>
</div><!-- fragment --><p >This query returns all the documents in the <b>documents</b> collection. If you add this below the insertMany example you'll see the document's you've inserted.</p>
<h2><a class="anchor" id="autotoc_md18116"></a>
Find Documents with a Query Filter</h2>
<p >Add a query filter to find only documents which meet the query criteria.</p>
<div class="fragment"><div class="line">const filteredDocs = await collection.find({ a: 3 }).toArray();</div>
<div class="line">console.log(&#39;Found documents filtered by { a: 3 } =&gt;&#39;, filteredDocs);</div>
</div><!-- fragment --><p >Only the documents which match &lsquo;'a&rsquo; : 3` should be returned.</p>
<h2><a class="anchor" id="autotoc_md18117"></a>
Update a document</h2>
<p >The following operation updates a document in the <b>documents</b> collection.</p>
<div class="fragment"><div class="line">const updateResult = await collection.updateOne({ a: 3 }, { $set: { b: 1 } });</div>
<div class="line">console.log(&#39;Updated documents =&gt;&#39;, updateResult);</div>
</div><!-- fragment --><p >The method updates the first document where the field <b>a</b> is equal to <b>3</b> by adding a new field <b>b</b> to the document set to <b>1</b>. <code>updateResult</code> contains information about whether there was a matching document to update or not.</p>
<h2><a class="anchor" id="autotoc_md18118"></a>
Remove a document</h2>
<p >Remove the document where the field <b>a</b> is equal to <b>3</b>.</p>
<div class="fragment"><div class="line">const deleteResult = await collection.deleteMany({ a: 3 });</div>
<div class="line">console.log(&#39;Deleted documents =&gt;&#39;, deleteResult);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md18119"></a>
Index a Collection</h2>
<p ><a href="https://docs.mongodb.org/manual/indexes/">Indexes</a> can improve your application's performance. The following function creates an index on the <b>a</b> field in the <b>documents</b> collection.</p>
<div class="fragment"><div class="line">const indexName = await collection.createIndex({ a: 1 });</div>
<div class="line">console.log(&#39;index name =&#39;, indexName);</div>
</div><!-- fragment --><p >For more detailed information, see the <a href="https://docs.mongodb.com/manual/applications/indexes/">indexing strategies page</a>.</p>
<h1><a class="anchor" id="autotoc_md18120"></a>
Error Handling</h1>
<p >If you need to filter certain errors from our driver we have a helpful tree of errors described in <a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/docs/errors.md">docs/errors.md</a>.</p>
<p >It is our recommendation to use <code>instanceof</code> checks on errors and to avoid relying on parsing <code>error.message</code> and <code>error.name</code> strings in your code. We guarantee <code>instanceof</code> checks will pass according to semver guidelines, but errors may be sub-classed or their messages may change at any time, even patch releases, as we see fit to increase the helpfulness of the errors.</p>
<p >Any new errors we add to the driver will directly extend an existing error class and no existing error will be moved to a different parent class outside of a major release. This means <code>instanceof</code> will always be able to accurately capture the errors that our driver throws (or returns in a callback).</p>
<div class="fragment"><div class="line">const client = new MongoClient(url);</div>
<div class="line">await client.connect();</div>
<div class="line">const collection = client.db().collection(&#39;collection&#39;);</div>
<div class="line"> </div>
<div class="line">try {</div>
<div class="line">  await collection.insertOne({ _id: 1 });</div>
<div class="line">  await collection.insertOne({ _id: 1 }); // duplicate key error</div>
<div class="line">} catch (error) {</div>
<div class="line">  if (error instanceof MongoServerError) {</div>
<div class="line">    console.log(`Error worth logging: ${error}`); // special case for some reason</div>
<div class="line">  }</div>
<div class="line">  throw error; // still want to crash</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md18121"></a>
Next Steps</h1>
<ul>
<li><a href="https://docs.mongodb.com/manual/">MongoDB Documentation</a></li>
<li><a href="https://docs.mongodb.com/drivers/node/">MongoDB Node Driver Documentation</a></li>
<li><a href="https://docs.mongodb.com/manual/core/data-modeling-introduction/">Read about Schemas</a></li>
<li><a href="https://github.com/mongodb/node-mongodb-native">Star us on GitHub</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md18122"></a>
License</h1>
<p ><a class="el" href="md__c___users_chandrakant_shinde3__desktop__m_a_v_e_r_i_c_k__hands_on__d_p_mean_stack_example_se8691ed7ecfd72a62251d6fefe6df2f15.html">Apache 2.0</a></p>
<p >© 2009-2012 Christian Amor Kvalheim © 2012-present MongoDB <a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/CONTRIBUTORS.md">Contributors</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
